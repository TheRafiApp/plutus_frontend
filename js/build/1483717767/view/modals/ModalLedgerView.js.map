{"version":3,"sources":["view/modals/ModalLedgerView.js"],"names":["define","app","ModalView","PropertiesCollection","TransferModel","DateView","ModalTransferTemplate","extend","eventName","title","this","action","template","_","initialize","_options","self","model","properties","fetch","then","renderModalView","render","ready","toJSON","$el","find","html","context","name"],"mappings":"AAIAA,QACE,MACA,wBACA,6CACA,gCACA,+BACA,2CAEF,SACEC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGA,MAAOJ,GAAUK,QAEfC,UAAW,UAEXC,MAAO,WACL,MAAOC,MAAKC,OAAS,iBAGvBC,SAAUC,EAAED,SAASN,GAErBQ,WAAY,SAASC,GACfA,GAAUF,EAAEN,OAAOG,KAAMK,EAE7B,IAAIC,GAAON,IACNA,MAAKO,QAAOP,KAAKO,MAAQ,GAAIb,GAAc,MAC9CO,OAAQ,SAGVD,KAAKQ,WAAa,GAAIf,GACtBO,KAAKQ,WAAWC,QAAQC,KAAK,WAC3BJ,EAAKK,qBAITC,OAAQ,WAaN,MAVAZ,MAAKa,OACHL,WAAYR,KAAKQ,WAAWM,WAI9Bd,KAAKe,IAAIC,KAAK,gBAAgBC,KAAK,GAAItB,IACrCuB,QAASlB,KACTmB,KAAM,SACLJ,KAEIf","file":"ModalLedgerView.js","sourcesContent":["/**\n * ModalLedgerView.js\n */\n\ndefine([\n  'app',\n  'view/modals/ModalView',\n  'collection/properties/PropertiesCollection',\n  'model/transfers/TransferModel',\n  'view/repeaters/date-calendar',\n  'text!templates/modals/modal-ledger.html'\n],\nfunction(\n  app, \n  ModalView, \n  PropertiesCollection, \n  TransferModel, \n  DateView, \n  ModalTransferTemplate\n){\n\n  return ModalView.extend({\n\n    eventName: 'confirm',\n\n    title: function() {\n      return this.action + ' Ledger Entry';\n    },\n\n    template: _.template(ModalTransferTemplate),\n\n    initialize: function(_options) {\n      if (_options) _.extend(this, _options);\n\n      var self = this;\n      if (!this.model) this.model = new TransferModel(null, {\n        action: 'add'\n      });\n\n      this.properties = new PropertiesCollection();\n      this.properties.fetch().then(function() {\n        self.renderModalView();\n      });\n    },\n\n    render: function() {\n      var self = this;\n\n      this.ready({\n        properties: this.properties.toJSON()\n      });\n\n      // init calendar\n      this.$el.find('.date-picker').html(new DateView({\n        context: this,\n        name: 'date'\n      }).$el);\n\n      return this;\n    }\n    \n  });\n});"]}