define(["app","view/modals/ModalPropertyView","view/modals/ModalInviteView","text!templates/nav/manager.html"],function(t,e,n,d){return Backbone.View.extend({template:_.template(d),events:{"mousedown .action-add-manager":"addManager","mousedown .action-add-tenant":"addTenant","mousedown .action-add-landlord":"addLandlord","mousedown .action-add-property":"addProperty","click .action-logout":"logout","click .action-toggle-sub":"toggleSub","click .action-quick-add":"toggleQuickAdd","blur .action-toggle-sub":"toggleSub","blur .action-quick-add":"toggleQuickAdd","mousedown .switches .tooltip a":"quickLink"},initialize:function(){return t.router.on("route",function(t,e){this.update()},this),this.on({managerAdded:this.managerAdded,tenantAdded:this.tenantAdded,landlordAdded:this.landlordAdded,propertyAdded:this.propertyAdded}),this.render(),this.update(),this},update:function(){var e=t.router.getRoute().split("?")[0];this.$el.find("ul li a").removeClass("active"),this.$el.find('a[href="/'+e+'"]').addClass("active")},render:function(){return this.$el.html(this.template({logo:t.templates.logo()})),this},logout:function(){t.controls.logout()},toggleQuickAdd:function(){var t=this.$el.find(".footer-actions .tooltip"),e=this.$el.find(".action-quick-add");t.hasClass("open")?t.removeClass("open"):(t.addClass("open"),e.focus())},toggleSub:function(t){var e=$(t.currentTarget),n=e.next(".tooltip");n.hasClass("open")?n.removeClass("open"):"click"==t.type&&(n.addClass("open"),e.focus())},quickLink:function(e){e.preventDefault();var n=$(e.currentTarget),d=n.attr("href");"#"!==d&&t.router.navigate(d,{trigger:!0,replace:!1})},addManager:function(){this.modal=new n({action:"invite",role:"manager",eventName:"managerAdded",context:this})},addTenant:function(){this.modal=new n({action:"invite",role:"tenant",eventName:"tenantAdded",context:this})},addLandlord:function(){this.modal=new n({action:"invite",role:"landlord",eventName:"landlordAdded",context:this})},addProperty:function(){this.modal=new e({action:"add",eventName:"propertyAdded",context:this})},adminAdded:function(){t.router.navigate("/admins",{trigger:!0})},managerAdded:function(){t.router.navigate("/managers",{trigger:!0})},tenantAdded:function(){t.router.navigate("/tenants",{trigger:!0})},landlordAdded:function(){t.router.navigate("/landlords",{trigger:!0})},propertyAdded:function(){t.router.navigate("/properties",{trigger:!0})}})});
//# sourceMappingURL=manager.js.map
