{"version":3,"sources":["view/account/Payment.js"],"names":["define","app","FundingSourcesCollection","FundingSourcesView","ModalFundingSourceView","Backbone","View","extend","className","events","click .action-add","initialize","options","_","this","self","close","model","parentModel","fetch","then","render","attachEvents","on","listening","parentView","$el","html","delegateEvents","addFundingSource","modal","action","eventName","context"],"mappings":"AAIAA,QACE,MACA,8CACA,0BACA,sCAGF,SACEC,EACAC,EACAC,EACAC,GAIA,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,0BAEXC,QACEC,oBAAqB,oBAGvBC,WAAY,SAASC,GACfA,GAASC,EAAEN,OAAOO,KAAMF,EAE5B,IAAIG,GAAOD,IAEPA,MAAKX,oBAAoBW,KAAKX,mBAAmBa,QAErDF,KAAKG,MAAQH,KAAKI,YAElBJ,KAAKG,MAAME,QAAQC,KAAK,WACtBL,EAAKM,YAITC,aAAc,WACZR,KAAKS,GAAG,aAAcT,KAAKH,WAAYG,MACvCA,KAAKU,WAAY,GAGnBH,OAAQ,WAYN,MAVKP,MAAKU,WAAWV,KAAKQ,eAE1BR,KAAKX,mBAAqB,GAAIA,IAC5BsB,WAAYX,OAGdA,KAAKY,IAAIC,KAAKb,KAAKX,mBAAmBuB,KAEtCZ,KAAKc,iBAEEd,MAGTe,iBAAkB,WAChBf,KAAKgB,MAAQ,GAAI1B,IACf2B,OAAQ,MACRC,UAAW,aACXC,QAASnB","file":"Payment.js","sourcesContent":["/**\n * account/Payment.js\n */\n\ndefine([\n  'app',\n  'collection/account/FundingSourcesCollection',\n  'view/FundingSourcesView',\n  'view/modals/ModalFundingSourceView',\n  // 'text!templates/account/account-payment.html',\n],\nfunction(\n  app, \n  FundingSourcesCollection, \n  FundingSourcesView, \n  ModalFundingSourceView\n  // AccountPaymentTemplate\n) {\n\n  return Backbone.View.extend({\n\n    className: 'account account-payment',\n\n    events: {\n      'click .action-add': 'addFundingSource',\n    },\n\n    initialize: function(options) {\n      if (options) _.extend(this, options);\n      \n      var self = this;\n\n      if (this.FundingSourcesView) this.FundingSourcesView.close();\n\n      this.model = this.parentModel;\n\n      this.model.fetch().then(function() {\n        self.render();\n      });\n    },\n\n    attachEvents: function() {\n      this.on('modelAdded', this.initialize, this);\n      this.listening = true;\n    },\n\n    render: function() {\n\n      if (!this.listening) this.attachEvents();\n\n      this.FundingSourcesView = new FundingSourcesView({ \n        parentView: this\n      });\n\n      this.$el.html(this.FundingSourcesView.$el);\n\n      this.delegateEvents();\n\n      return this;\n    },\n\n    addFundingSource: function() {\n      this.modal = new ModalFundingSourceView({\n        action: 'add',\n        eventName: 'modelAdded',\n        context: this\n      });\n    }\n    \n  });\n});"]}