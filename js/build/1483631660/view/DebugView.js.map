{"version":3,"sources":["view/DebugView.js"],"names":["define","app","TestModel","DebugMenuTemplate","Backbone","View","extend","className","template","_","events","click .action-debug-toggle","click .action-console-app","click .action-console-session","click .action-console-user","click .action-console-stash","click .action-require-modules","click .action-switch-api","click .action-global-app","click .action-unit-tests","click .action-clear-stash","click .action-view-stash","click .action-skip-iav","click .action-error","click .action-alert","click .action-success","click .action-warn","change #toggle-activation","initialize","self","this","session","on","render","require","$","window","keydown","e","keyCode","$el","html","activation","utils","stash","getItem","find","version","url","base_url","VERSION","renderAPI","renderUser","append","API","checkAPI","user","get","err","toggleActivation","isChecked","currentTarget","is","setItem","removeItem","toggleAPI","roots","current","index","indexOf","length","next","request","method","then","addClass","removeClass","fail","console","warn","switchAPI","router","checkAuth","controls","logout","always","toggleMenu","toggleClass","consoleApp","log","consoleSession","consoleStash","consoleRequire","s","contexts","defined","consoleUser","attributes","globalApp","clearStash","clear","viewStash","sendError","error","TypeError","alertError","alerts","alertSuccess","success","alertWarn","showUnitTests","skipIAV","views","activateView","path","data","id","status","set","unitTests","unit_tests","describe","it","first_name","last_name","phone","processed","schema","process","expected","expect","toEqual","manager","test","date","moment","more","amount","check","format","money","invalid_data","toThrow","ISO","toMatch","parseMoney","parseName","validateContact","toBe","test2","test3","undefined","trim","stuff","rules","but","you","dont","prettyMoney","prettyPhone","toBeFalsy","uglyPhone","a","j","h","b","c","findVal","contains","insert","onload","setTimeout"],"mappings":"AAIAA,QACE,MACA,8BACA,kCAEF,SAASC,EAAKC,EAAWC,GAEvB,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,aAEXC,SAAUC,EAAED,SAASL,GAErBO,QACEC,6BAA8B,aAC9BC,4BAA6B,aAC7BC,gCAAiC,iBACjCC,6BAA8B,cAC9BC,8BAA+B,eAC/BC,gCAAiC,iBACjCC,2BAA4B,YAC5BC,2BAA4B,YAC5BC,2BAA4B,YAC5BC,4BAA6B,aAC7BC,2BAA4B,YAE5BC,yBAA0B,UAE1BC,sBAAuB,YACvBC,sBAAuB,aACvBC,wBAAyB,eACzBC,qBAAsB,YAEtBC,4BAA6B,oBAG/BC,WAAY,WACV,GAAIC,GAAOC,IACX7B,GAAI8B,QAAQC,GAAG,mBAAoBF,KAAKG,OAAQH,MAEhDI,SAAS,gBAAiB,WACxBL,EAAKI,YAITA,OAAQ,WAeN,MAbAE,GAAEC,QAAQC,QAAQ,SAASC,GAAsB,KAAbA,EAAEC,UAEtCT,KAAKU,IAAIC,KAAKX,KAAKtB,UACjBkC,WAAYzC,EAAI0C,MAAMC,MAAMC,QAAQ,wBAEtCf,KAAKU,IAAIM,KAAK,gBAAgBL,KAAKxC,EAAI8C,SACvCjB,KAAKU,IAAIM,KAAK,aAAaL,KAAKxC,EAAI+C,IAAIC,UACxCnB,KAAKU,IAAIM,KAAK,qBAAqBL,KAAKrC,SAAS8C,SACjDpB,KAAKqB,YACLrB,KAAKsB,aACLjB,EAAE,QAAQkB,OAAOvB,KAAKU,KAGfV,MAGTqB,UAAW,WACTrB,KAAKU,IAAIM,KAAK,aAAaL,KAAKxC,EAAIqD,OACpCxB,KAAKyB,YAGPH,WAAY,WACV,GAAII,GAAOvD,EAAI8B,QAAQyB,IAEvB1B,MAAKU,IAAIM,KAAK,cAAcL,KAAKe,EAAKC,IAAI,SAC1C3B,KAAKU,IAAIM,KAAK,cAAcL,KAAKe,EAAKC,IAAI,aAC1C,KACE3B,KAAKU,IAAIM,KAAK,eAAeL,MAAMe,EAAKC,IAAI,UAAY,aAAe,MAAQD,EAAKC,IAAI,gBAAkB,UAAY,cAAgB,KACtI,MAAMC,IAER,IACE5B,KAAKU,IAAIM,KAAK,eAAeL,MAAMe,EAAKC,IAAI,iBAAmB,aAAe,MAAQD,EAAKC,IAAI,gBAAkB,UAAY,cAAgB,KAC7I,MAAMC,IAER,IACE5B,KAAKU,IAAIM,KAAK,gBAAgBL,KAAKe,EAAKC,IAAI,kBAC5C,MAAMC,IAER5B,KAAKU,IAAIM,KAAK,WAAWL,KAAKe,EAAKC,IAAI,gCAEvC3B,KAAKU,IAAIM,KAAK,iBAAiBL,KAAKe,EAAKC,IAAI,iBAAmBD,EAAKC,IAAI,aAI3EE,iBAAkB,SAASrB,GACzB,GAAIsB,GAAYzB,EAAEG,EAAEuB,eAAeC,GAAG,WAClCF,GACF3D,EAAI0C,MAAMC,MAAMmB,QAAQ,qBAAqB,GAE7C9D,EAAI0C,MAAMC,MAAMoB,WAAW,sBAK/BC,UAAW,WACT,GAAIC,IACF,0BACA,8BACA,wBACA,0BACA,kDACA,0CAIEC,EAAUlE,EAAI0C,MAAMC,MAAMC,QAAQ,QAAU5C,EAAIqD,MAChDc,EAAQF,EAAMG,QAAQF,EAEtBC,IAAUF,EAAMI,OAAQ,IAAIF,GAAQ,EAExC,IAAIG,GAAOL,EAAME,EAAQ,EACzBnE,GAAI0C,MAAMC,MAAMmB,QAAQ,MAAOQ,GAE/BzC,KAAKqB,aAGPI,SAAU,WACR,GAAI1B,GAAOC,IAEX7B,GAAI0C,MAAM6B,SACRC,OAAQ,QACPC,KAAK,WACN7C,EAAKW,IAAIM,KAAK,gBAAgB6B,SAAS,WAAWC,YAAY,WAC7DC,KAAK,SAASvC,GACfwC,QAAQC,KAAKzC,GACbT,EAAKW,IAAIM,KAAK,gBAAgB8B,YAAY,WAAWD,SAAS,YAIlEK,UAAW,WACT,GAAInD,GAAOC,IACX7B,GAAIgF,OAAOC,YAAYR,KAAK,WAC1BzE,EAAIkF,SAASC,WACZC,OAAO,WACRxD,EAAKoC,eAITqB,WAAY,WACVxD,KAAKU,IAAI+C,YAAY,WAGvBC,WAAY,WACVV,QAAQW,IAAIxF,IAGdyF,eAAgB,WACdZ,QAAQW,IAAIxF,EAAI8B,UAGlB4D,aAAc,WACZb,QAAQW,IAAIxF,EAAI0C,MAAMC,QAGxBgD,eAAgB,WACdd,QAAQW,IAAIvD,QAAQ2D,EAAEC,SAASrF,EAAEsF,UAGnCC,YAAa,WACXlB,QAAQW,IAAIxF,EAAI8B,QAAQyB,KAAKyC,aAG/BC,UAAW,WACT9D,OAAOnC,IAAMA,EACb6E,QAAQW,IAAIrD,OAAOnC,MAGrBkG,WAAY,WACVlG,EAAI0C,MAAMC,MAAMwD,QAChBtB,QAAQW,IAAI,sBAGdY,UAAW,WACTvB,QAAQW,IAAIxF,EAAI0C,MAAMC,QAGxB0D,UAAW,SAASC,GAClB,KAAM,IAAIC,WAAU,yBAGtBC,WAAY,WACVxG,EAAIyG,OAAOH,MAAM,0BAGnBI,aAAc,WACZ1G,EAAIyG,OAAOE,QAAQ,qCAGrBC,UAAW,WACT5G,EAAIyG,OAAO3B,KAAK,4BAGlB+B,cAAe,WACbhC,QAAQW,IAAI,kBACZX,QAAQW,IAAItD,EAAE,2BACdA,EAAE,0BAA0BwC,SAAS,YAGvCoC,QAAS,WACPjC,QAAQW,IAAIxF,EAAI+G,MAAMC,aAEtB,IAAIC,GACAD,EAAehH,EAAI+G,MAAMC,aACzBE,GACFC,GAAI,uCACJC,OAAQ,aAKRH,GAFEjH,EAAI8B,QAAQ0B,IAAI,aAEX,0BAGAwD,EAAazD,KAAKC,IAAI,QAAU,6BAGzCxD,EAAI0C,MAAM6B,SACR0C,KAAMA,EACNzC,OAAQ,OACR0C,KAAMA,IACLzC,KAAK,SAASyC,GAEfF,EAAazD,KAAK8D,IAAIH,GACtBF,EAAa1C,UAKjBgD,UAAW,WAET,GAAIzF,KAAK0F,WAEP,WADA1F,MAAKgF,eAIPhF,MAAK0F,YAAa,EAElBC,SAAS,qBAAsB,WAC7BC,GAAG,yCAA0C,WAC3C,GAAIP,IACFQ,WAAY,OACZC,UAAW,MACXC,MAAO,kBAGLC,EAAY7H,EAAI8H,OAAOC,QAAQb,EAAMlH,EAAI8B,QAAQyB,MAEjDyE,GACFN,WAAY,OACZC,UAAW,MACXC,MAAO,aAGTK,QAAOJ,GAAWK,QAAQF,KA2B5BP,GAAG,+BAAgC,WACjC,GAAIP,IACFU,MAAO,iBACPO,SACEP,MAAO,iBACPQ,MACEC,KAAMC,OAAO,aACbV,MAAO,iBACPW,MACEX,MAAO,iBACPS,KAAMC,OAAO,aACbE,OAAQ,cAMZX,EAAY7H,EAAI8H,OAAOC,QAAQb,EAAM,GAAIjH,IAEzC+H,GACFJ,MAAO,aACPO,SACEP,MAAO,aACPQ,MACEC,KAAM,2BACNT,MAAO,aACPW,MACEX,MAAO,aACPS,KAAM,2BACNG,OAAQ,UAMhBP,QAAOJ,GAAWK,QAAQF,OAI9BR,SAAS,0BAA2B,WAClCC,GAAG,qDAAsD,WACvD,GAAIP,GAAO,IACPuB,EAAQzI,EAAI8H,OAAOY,OAAOC,MAAMzB,EACpCe,QAAOQ,GAAOP,QAAQ,OAGxBT,GAAG,6EAA8E,WAC/E,GAAIP,GAAO,MACPuB,EAAQzI,EAAI8H,OAAOY,OAAOC,MAAMzB,EACpCe,QAAOQ,GAAOP,QAAQ,OAGxBT,GAAG,6EAA8E,WAC/E,GAAIP,GAAO,OACPuB,EAAQzI,EAAI8H,OAAOY,OAAOC,MAAMzB,EACpCe,QAAOQ,GAAOP,QAAQ,OAGxBT,GAAG,0CAA2C,WAC5C,GAAImB,GAAe,OACnBX,QAAO,WAAajI,EAAI8H,OAAOY,OAAOC,MAAMC,KAAkBC,QAAQ,GAAItC,WAAU,8BAGtFkB,GAAG,0CAA2C,WAC5C,GAAImB,GAAe,SACnBX,QAAO,WAAajI,EAAI8H,OAAOY,OAAOC,MAAMC,KAAkBC,QAAQ,GAAItC,WAAU,8BAGtFkB,GAAG,0CAA2C,WAC5C,GAAImB,GAAe,UACnBX,QAAO,WAAajI,EAAI8H,OAAOY,OAAOC,MAAMC,KAAkBC,QAAQ,GAAItC,WAAU,gCAIxFiB,SAAS,0BAA2B,WAClCC,GAAG,gEAAiE,WAClE,GAAIP,GAAO,iBACPuB,EAAQzI,EAAI8H,OAAOY,OAAOd,MAAMV,EACpCe,QAAOQ,GAAOP,QAAQ,kBAS1BV,SAAS,wBAAyB,WAChCC,GAAG,4CAA6C,WAC9C,GAAIP,GAAO,YACPuB,EAAQzI,EAAI8H,OAAOY,OAAOI,IAAI5B,EAClCe,QAAOQ,GAAOP,QAAQ,8BAGxBT,GAAG,8CAA+C,WAChD,GAAIP,GAAOoB,OAAO,aACdG,EAAQzI,EAAI8H,OAAOY,OAAOI,IAAI5B,EAClCe,QAAOQ,GAAOP,QAAQ,8BAGxBT,GAAG,0CAA2C,WAC5C,GAAImB,GAAe,yBACnBX,QAAO,WAAajI,EAAI8H,OAAOY,OAAOI,IAAIF,KAAkBC,QAAQ,GAAItC,WAAU,+BAItFiB,SAAS,kBAAmB,WAC1BC,GAAG,iDAAkD,WACnDzH,EAAI0C,MAAMC,MAAMmB,QAAQ,OAAQ,KAChC,IAAI2E,GAAQzI,EAAI0C,MAAMC,MAAMC,QAAQ,OAEtB,QAAV6F,GAAgBzI,EAAI0C,MAAMC,MAAMoB,WAAW,QAC/CkE,OAAOQ,GAAOM,QAAQ,UAI1BvB,SAAS,uBAAwB,WAC/BC,GAAG,iDAAkD,WAEnD,GAAIgB,GAAQzI,EAAI0C,MAAMsG,WAAW,UAEjCf,QAAOQ,GAAOM,QAAQ,YAGxBtB,GAAG,6CAA8C,WAC/C,GAAIgB,GAAQzI,EAAI0C,MAAMsG,WAAW,QAEjCf,QAAOQ,GAAOM,QAAQ,YAGxBtB,GAAG,qCAAsC,WACvC,GAAIgB,GAAQzI,EAAI0C,MAAMsG,WAAW,MAEjCf,QAAOQ,GAAOM,QAAQ,cAI1BvB,SAAS,sBAAuB,WAC9BC,GAAG,uDAAwD,WAEzD,GAAIgB,GAAQzI,EAAI0C,MAAMuG,UAAU,sBAE5BjB,GACFN,WAAY,YACZC,UAAW,WAGbM,QAAOQ,GAAOP,QAAQF,KAGxBP,GAAG,uDAAwD,WAEzD,GAAIgB,GAAQzI,EAAI0C,MAAMuG,UAAU,OAE5BjB,GACFN,WAAY,MAGdO,QAAOQ,GAAOP,QAAQF,OAI1BR,SAAS,4BAA6B,WACpCC,GAAG,gDAAiD,WAClD,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,sBAEtCjB,QAAOQ,GAAOM,QAAQ,WAGxBtB,GAAG,2CAA4C,WAC7C,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,iBAEtCjB,QAAOQ,GAAOM,QAAQ,WAGxBtB,GAAG,0CAA2C,WAC5C,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,gBAEtCjB,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,2CAA4C,WAC7C,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,iBAEtCjB,QAAOQ,GAAOM,QAAQ,WAGxBtB,GAAG,uCAAwC,WACzC,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,aAEtCjB,QAAOQ,GAAOM,QAAQ,WAGxBtB,GAAG,4CAA6C,WAC9C,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,oBAEtCjB,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,0CAA2C,WAC5C,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,gBAEtCjB,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,uDAAwD,WACzD,GAAIgB,GAAQzI,EAAI0C,MAAMwG,gBAAgB,kBAAkB,GAEpDlB,GACFJ,MAAO,aAGTK,QAAOQ,GAAOP,QAAQF,OAM1BR,SAAS,iBAAkB,WACzBC,GAAG,sDAAuD,WACxD,GAAIP,IACFQ,WAAY,SACZC,UAAW,QACXS,KAAM,GACNgB,MAAO,KACPC,MAAOC,QAGLzB,EAAY7H,EAAI0C,MAAM6G,KAAKrC,GAE3Bc,GACFN,WAAY,SACZC,UAAW,QAGbM,QAAOJ,GAAWK,QAAQF,KAG5BP,GAAG,4DAA6D,WAC9D,GAAIP,IACFQ,WAAY,SACZC,UAAW,QACXS,KAAM,GACNgB,MAAO,KACPC,MAAOC,OACPf,MACEiB,OAAO,EACPC,MAAO,EACPC,IAAK,GACLC,IAAK,KACLC,KAAMN,SAINzB,EAAY7H,EAAI0C,MAAM6G,KAAKrC,GAE3Bc,GACFN,WAAY,SACZC,UAAW,QACXY,MACEiB,OAAO,EACPC,MAAO,GAIXxB,QAAOJ,GAAWK,QAAQF,OAO9BR,SAAS,wBAAyB,WAChCC,GAAG,6CAA8C,WAE/C,GAAIgB,GAAQzI,EAAI0C,MAAMmH,YAAY,QAClC5B,QAAOQ,GAAOP,QAAQ,YAGxBT,GAAG,6CAA8C,WAE/C,GAAIgB,GAAQzI,EAAI0C,MAAMmH,YAAY,SAClC5B,QAAOQ,GAAOP,QAAQ,eAM1BV,SAAS,wBAAyB,WAChCC,GAAG,wCAAyC,WAE1C,GAAIgB,GAAQzI,EAAI0C,MAAMoH,YAAY,aAClC7B,QAAOQ,GAAOP,QAAQ,oBAGxBT,GAAG,4CAA6C,WAE9C,GAAIgB,GAAQzI,EAAI0C,MAAMoH,YAAY,eAClC7B,QAAOQ,GAAOsB,gBAMlBvC,SAAS,sBAAuB,WAC9BC,GAAG,sCAAuC,WAExC,GAAIgB,GAAQzI,EAAI0C,MAAMsH,UAAU,iBAChC/B,QAAOQ,GAAOP,QAAQ,gBAGxBT,GAAG,+CAAgD,WAEjD,GAAIgB,GAAQzI,EAAI0C,MAAMsH,UAAU,uBAChC/B,QAAOQ,GAAOsB,gBAMlBvC,SAAS,oBAAqB,WAC5BC,GAAG,gFAAiF,WAElF,GAAIP,IACF+C,GACEC,EAAG,EACHC,EAAG,GAELC,GACEF,EAAG,EACHC,EAAG,GAELE,GACEH,EAAG,EACHC,EAAG,IAIH1B,EAAQzI,EAAI0C,MAAM4H,QAAQ,EAAGpD,EAEjCe,QAAOQ,GAAOP,QAAQ,SAM1BV,SAAS,iBAAkB,WACzBC,GAAG,0CAA2C,WAC5C,GAAIgB,IAAS,EAAE,EAAE,EAAE,KAAK8B,SAAS,EAEjCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,2CAA4C,WAC7C,GAAIgB,IAAS,EAAE,EAAE,EAAE,KAAK8B,SAAS,EAEjCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,4CAA6C,WAC9C,GAAIgB,IAAS,EAAE,EAAE,EAAE,KAAK8B,SAAS,EAAG,EAEpCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,8CAA+C,WAChD,GAAIgB,IAAS,EAAE,EAAE,EAAE,KAAK8B,SAAS,EAAG,EAEpCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,yDAA0D,WAC3D,GAAIgB,IAAS,EAAE,OAAQ,EAAG,QAAQ8B,SAAS,EAE3CtC,QAAOQ,GAAOU,MAAK,OAMvB3B,SAAS,kBAAmB,WAC1BC,GAAG,wCAAyC,WAC1C,GAAIgB,GAAQ,QAAQ8B,SAAS,IAE7BtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,2CAA4C,WAC7C,GAAIgB,GAAQ,UAAU8B,SAAS,IAE/BtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,4CAA6C,WAC9C,GAAIgB,GAAQ,QAAQ8B,SAAS,IAAK,IAElCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,+CAAgD,WACjD,GAAIgB,GAAQ,UAAU8B,SAAS,IAAK,IAEpCtC,QAAOQ,GAAOU,MAAK,KAGrB1B,GAAG,2DAA4D,WAC7D,GAAIgB,GAAQ,wBAAwB8B,SAAS,OAE7CtC,QAAOQ,GAAOU,MAAK,OAMvB3B,SAAS,gBAAiB,WACxBC,GAAG,8CAA+C,WAChD,GAAIgB,GAAQ,OAAO+B,OAAO,IAAK,EAE/BvC,QAAOQ,GAAOM,QAAQ,WAGxBtB,GAAG,oEAAqE,WACtE,GAAIgB,GAAQ,aAAa+B,OAAO,OAEhCvC,QAAOQ,GAAOM,QAAQ,oBAGxBtB,GAAG,kDAAmD,WACpD,GAAIgB,GAAQ,aAAa+B,OAAO,QAAQ,EAExCvC,QAAOQ,GAAOM,QAAQ,sBAM1B5G,OAAOsI,QAEP,IAAI7I,GAAOC,IACX6I,YAAW,WACT9I,EAAKiF,iBACJ","file":"DebugView.js","sourcesContent":["/**\n * DebugView.js\n */\n\ndefine([\n  'app',\n  'model/admin/debug/TestModel',\n  'text!templates/debug/menu.html'\n],\nfunction(app, TestModel, DebugMenuTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'debug-menu',\n\n    template: _.template(DebugMenuTemplate),\n\n    events: {\n      'click .action-debug-toggle': 'toggleMenu',\n      'click .action-console-app': 'consoleApp',\n      'click .action-console-session': 'consoleSession',\n      'click .action-console-user': 'consoleUser',\n      'click .action-console-stash': 'consoleStash',\n      'click .action-require-modules': 'consoleRequire',\n      'click .action-switch-api': 'switchAPI',\n      'click .action-global-app': 'globalApp',\n      'click .action-unit-tests': 'unitTests',\n      'click .action-clear-stash': 'clearStash',\n      'click .action-view-stash': 'viewStash',\n\n      'click .action-skip-iav': 'skipIAV',\n\n      'click .action-error': 'sendError',\n      'click .action-alert': 'alertError',\n      'click .action-success': 'alertSuccess',\n      'click .action-warn': 'alertWarn',\n\n      'change #toggle-activation': 'toggleActivation'\n    },\n\n    initialize: function() {\n      var self = this;\n      app.session.on('change:logged_in', this.render, this);\n\n      require(['jasmine-boot'], function() {\n        self.render();\n      });\n    },\n\n    render: function() {\n      // keyboard shortcut for debugger\n      $(window).keydown(function(e) { if (e.keyCode == 123) debugger; });\n      \n      this.$el.html(this.template({\n        activation: app.utils.stash.getItem('bypass-activation')\n      }));\n      this.$el.find('.app-version').html(app.version);\n      this.$el.find('.app-root').html(app.url.base_url);\n      this.$el.find('.backbone-version').html(Backbone.VERSION);\n      this.renderAPI();\n      this.renderUser();\n      $('body').append(this.$el);\n\n      \n      return this;\n    },\n\n    renderAPI: function() {\n      this.$el.find('.api-root').html(app.API());\n      this.checkAPI();\n    },\n\n    renderUser: function() {\n      var user = app.session.user;\n\n      this.$el.find('.user-role').html(user.get('role'));\n      this.$el.find('.user-name').html(user.get('full_name'));\n      try {\n        this.$el.find('.user-email').html((user.get('email') || '-Not Set-') + ' (' + (user.get('status.email') ? 'verfied' : 'unverified') + ')');\n      } catch(err) {}\n\n      try {\n        this.$el.find('.user-phone').html((user.get('phone_pretty') || '-Not Set-') + ' (' + (user.get('status.phone') ? 'verfied' : 'unverified') + ')');\n      } catch(err) {}\n\n      try {\n        this.$el.find('.user-dwolla').html(user.get('status.dwolla'));\n      } catch(err) {}\n\n      this.$el.find('.atoken').html(user.get('session.authorization_token'));\n      \n      this.$el.find('.user-company').html(user.get('company.name') || user.get('company'));\n      // this.$el.find('.user-company-id').html(app.session.user.get('company_id'));\n    },\n\n    toggleActivation: function(e) {\n      var isChecked = $(e.currentTarget).is(':checked');\n      if (isChecked) {\n        app.utils.stash.setItem('bypass-activation', true);\n      } else {\n        app.utils.stash.removeItem('bypass-activation');\n      }\n    },\n\n    // increment thru the list of possible API locations\n    toggleAPI: function() {\n      var roots = [\n        'https://api.plutus.dev/', // local\n        'https://postman.plutus.dev/', // local postman\n        'http://10.1.10.38:81/', // LAN (chris)\n        'https://10.1.10.38:443/', // LAN SSL\n        'https://api.staging.payment.rafiproperties.com/', // staging\n        'http://api.payment.rafiproperties.com/', // production\n        // 'http://209.6.68.251:81/', // remote brighton (chris)\n      ];\n\n      var current = app.utils.stash.getItem('API') || app.API();\n      var index = roots.indexOf(current);\n\n      if (index >= (roots.length -1)) index = -1;\n\n      var next = roots[index + 1];\n      app.utils.stash.setItem('API', next);\n\n      this.renderAPI();\n    }, \n\n    checkAPI: function() {\n      var self = this;\n\n      app.utils.request({\n        method: 'GET'\n      }).then(function() {\n        self.$el.find('.status-icon').addClass('success').removeClass('error');\n      }).fail(function(e) {\n        console.warn(e);\n        self.$el.find('.status-icon').removeClass('success').addClass('error');\n      });\n    },\n\n    switchAPI: function() {\n      var self = this;\n      app.router.checkAuth().then(function() {\n        app.controls.logout();\n      }).always(function() {\n        self.toggleAPI();\n      });\n    },\n\n    toggleMenu: function() {\n      this.$el.toggleClass('active');\n    },\n\n    consoleApp: function() {\n      console.log(app);\n    },\n\n    consoleSession: function() {\n      console.log(app.session);\n    },\n\n    consoleStash: function() {\n      console.log(app.utils.stash);\n    },\n\n    consoleRequire: function() {\n      console.log(require.s.contexts._.defined);\n    },\n\n    consoleUser: function() {\n      console.log(app.session.user.attributes);\n    },\n\n    globalApp: function() {\n      window.app = app;\n      console.log(window.app);\n    },\n\n    clearStash: function() {\n      app.utils.stash.clear();\n      console.log('app stash cleared');\n    },\n\n    viewStash: function() {\n      console.log(app.utils.stash);\n    },\n\n    sendError: function(error) {\n      throw new TypeError('This is a test error');\n    },\n\n    alertError: function() {\n      app.alerts.error('This is a test error!');\n    },\n\n    alertSuccess: function() {\n      app.alerts.success('This is a test success messsage!');\n    },\n\n    alertWarn: function() {\n      app.alerts.warn('This is a test warning!');\n    },\n\n    showUnitTests: function() {\n      console.log('run unit tests')\n      console.log($('.jasmine_html-reporter'));\n      $('.jasmine_html-reporter').addClass('visible');\n    },\n\n    skipIAV: function() {\n      console.log(app.views.activateView);\n\n      var path;\n      var activateView = app.views.activateView;\n      var data = {\n        id: 'ee36bb47-0960-4c5e-85a8-a933e33e941b', // id\n        status: 'unverified'\n      };\n\n      if (app.session.get('logged_in')) {\n        // if already active, just \n        path = 'account/funding_sources';\n      } else {\n        // if activating, set primary\n        path = activateView.user.get('role') + 's/activate/funding_sources';\n      }\n\n      app.utils.request({\n        path: path,\n        method: 'POST',\n        data: data\n      }).then(function(data) {\n        // user has new primary funding source :D\n        activateView.user.set(data);\n        activateView.next();\n      });\n    },\n\n    // jasmine unit tests\n    unitTests: function() {\n      \n      if (this.unit_tests) {\n        this.showUnitTests();\n        return;\n      }\n\n      this.unit_tests = true;\n\n      describe('app.schema.process', function() {\n        it('should convert formatted phone numbers', function() {\n          var data = {\n            first_name: 'John',\n            last_name: 'Doe',\n            phone: '(617) 555-5555'\n          };\n\n          var processed = app.schema.process(data, app.session.user);\n\n          var expected = {\n            first_name: 'John',\n            last_name: 'Doe',\n            phone: '6175555555'\n          };\n\n          expect(processed).toEqual(expected);\n        });\n\n        // it('should throw error for invalid phone number', function() {\n        //   var data = {\n        //     first_name: 'John',\n        //     last_name: 'Doe',\n        //     phone: '(617) 555-55554'\n        //   };\n\n        //   expect(function() { app.schema.process(data, app.session.user); } ).toThrow(new TypeError('Invalid phone number input'));\n        // });\n\n        // it('should throw error for nested invalid phone number', function() {\n        //   var data = {\n        //     first_name: 'John',\n        //     last_name: 'Doe',\n        //     manager: {\n        //       phone: '(617) 555-55554'\n        //     }\n        //   };\n\n        //   console.log(app.schema.process(data, new TestModel()))\n\n        //   expect(function() { app.schema.process(data, new TestModel()); } ).toThrow(new TypeError('Invalid phone number input'));\n        // });\n\n        it('should handle nested schemas', function() {\n          var data = {\n            phone: '(617) 555-5432',\n            manager: {\n              phone: '(617) 555-1234',\n              test: {\n                date: moment('4/20/1960'),\n                phone: '(617) 555-4433',\n                more: {\n                  phone: '(617) 555-5432',\n                  date: moment('5/30/1999'),\n                  amount: '2400.50'\n                }\n              }\n            }\n          };\n\n          var processed = app.schema.process(data, new TestModel());\n\n          var expected = {\n            phone: '6175555432',\n            manager: {\n              phone: '6175551234',\n              test: {\n                date: '1960-04-20T04:00:00.000Z',\n                phone: '6175554433',\n                more: {\n                  phone: '6175555432',\n                  date: '1999-05-30T04:00:00.000Z',\n                  amount: 2400.5\n                }\n              }\n            }\n          };\n\n          expect(processed).toEqual(expected);\n        });\n      });\n\n      describe('app.schema.format.money', function() {\n        it('should convert an integer to valid currency string', function() {\n          var data = 250;\n          var check = app.schema.format.money(data);\n          expect(check).toEqual(250);\n        });\n\n        it('should convert a currency string without decimals to valid currency string', function() {\n          var data = '250';\n          var check = app.schema.format.money(data);\n          expect(check).toEqual(250);\n        });\n\n        it('should convert a currency string with dollar sign to valid currency string', function() {\n          var data = '$250';\n          var check = app.schema.format.money(data);\n          expect(check).toEqual(250);\n        });\n\n        it('should throw an error for invalid input', function() {\n          var invalid_data = '349jd';\n          expect(function() { app.schema.format.money(invalid_data); }).toThrow(new TypeError('Invalid currency amount'));\n        });\n\n        it('should throw an error for invalid input', function() {\n          var invalid_data = '$39.23>';\n          expect(function() { app.schema.format.money(invalid_data); }).toThrow(new TypeError('Invalid currency amount'));\n        });\n\n        it('should throw an error for invalid input', function() {\n          var invalid_data = '(*&)*&^%';\n          expect(function() { app.schema.format.money(invalid_data); }).toThrow(new TypeError('Invalid currency amount'));\n        });\n      });\n\n      describe('app.schema.format.phone', function() {\n        it('should convert a pretty phone number to uglified phone number', function() {\n          var data = '(203) 555-1234';\n          var check = app.schema.format.phone(data);\n          expect(check).toEqual('2035551234');\n        });\n\n        // it('should throw an error for invalid input', function() {\n        //   var invalid_data = '(203) 555-12343';\n        //   expect(function() { app.schema.format.phone(invalid_data); }).toThrow(new TypeError('Invalid phone number input'));\n        // });\n      });\n\n      describe('app.schema.format.ISO', function() {\n        it('should convert a date string to ISOString', function() {\n          var data = '4/20/2012';\n          var check = app.schema.format.ISO(data);\n          expect(check).toEqual('2012-04-20T04:00:00.000Z');\n        });\n\n        it('should convert a moment object to ISOString', function() {\n          var data = moment('4/20/2012');\n          var check = app.schema.format.ISO(data);\n          expect(check).toEqual('2012-04-20T04:00:00.000Z');\n        });\n\n        it('should throw an error for invalid input', function() {\n          var invalid_data = '20398234.234/234/234234';\n          expect(function() { app.schema.format.ISO(invalid_data); }).toThrow(new TypeError('Invalid ISO date input'));\n        });\n      });\n\n      describe('app.utils.stash', function() {\n        it('should save and retrieve a string to app stash', function() {\n          app.utils.stash.setItem('test', 'ok');\n          var check = app.utils.stash.getItem('test');\n\n          if (check === 'ok') app.utils.stash.removeItem('test');\n          expect(check).toMatch('ok');\n        });\n      });\n\n      describe('app.utils.parseMoney', function() {\n        it('should properly handle too many decimal places', function() {\n\n          var check = app.utils.parseMoney('123.333');\n\n          expect(check).toMatch('123.33');\n        });\n\n        it('should properly handle not enough decimals', function() {\n          var check = app.utils.parseMoney('123.3');\n\n          expect(check).toMatch('123.30');\n        });\n\n        it('should properly handle no decimals', function() {\n          var check = app.utils.parseMoney('123');\n\n          expect(check).toMatch('123.00');\n        });\n      });\n\n      describe('app.utils.parseName', function() {\n        it('should correctly split up a name with multiple parts', function() {\n\n          var check = app.utils.parseName('Ben Stein Goldfish');\n\n          var expected = {\n            first_name: 'Ben Stein',\n            last_name: 'Goldfish'\n          }\n\n          expect(check).toEqual(expected);\n        });\n\n        it('should correctly split up a name with multiple parts', function() {\n\n          var check = app.utils.parseName('Ben');\n\n          var expected = {\n            first_name: 'Ben'\n          }\n\n          expect(check).toEqual(expected);\n        });\n      });\n\n      describe('app.utils.validateContact', function() {\n        it('should return \"email\" for testemail@gmail.com', function() {\n          var check = app.utils.validateContact('testemail@gmail.com');\n\n          expect(check).toMatch('email');\n        });\n\n        it('should return \"email\" for test@gmail.com', function() {\n          var check = app.utils.validateContact('test@gmail.com');\n\n          expect(check).toMatch('email');\n        });\n\n        it('should return \"email\" for tes@gmail.com', function() {\n          var check = app.utils.validateContact('tes@gmail.com');\n\n          expect(check).toBe(false);\n        });\n\n        it('should return \"phone\" for (203) 555-1234', function() {\n          var check = app.utils.validateContact('(203) 555-1234');\n\n          expect(check).toMatch('phone');\n        });\n\n        it('should return \"phone\" for 2035551234', function() {\n          var check = app.utils.validateContact('2035551234');\n\n          expect(check).toMatch('phone');\n        });\n\n        it('should return false for (203) 555-1234-65', function() {\n          var check = app.utils.validateContact('(203) 555-1234-65');\n\n          expect(check).toBe(false);\n        });\n\n        it('should return false for \"thisisinvalid\"', function() {\n          var check = app.utils.validateContact('thisisinvalid');\n\n          expect(check).toBe(false);\n        });\n\n        it('should return a phone object when second arg is true', function() {\n          var check = app.utils.validateContact('(203) 555-1234', true);\n\n          var expected = {\n            phone: '2035551234'\n          };\n\n          expect(check).toEqual(expected);\n        });\n      });\n\n      // app.utils.trim\n      \n      describe('app.utils.trim', function() {\n        it('should remove empty or null properties in an object', function() {\n          var data = {\n            first_name: 'Tester',\n            last_name: 'Jones',\n            test: '',\n            test2: null,\n            test3: undefined\n          };\n\n          var processed = app.utils.trim(data);\n\n          var expected = {\n            first_name: 'Tester',\n            last_name: 'Jones'\n          };\n\n          expect(processed).toEqual(expected);\n        });\n\n        it('should remove empty or null properties in a nested object', function() {\n          var data = {\n            first_name: 'Tester',\n            last_name: 'Jones',\n            test: '',\n            test2: null,\n            test3: undefined,\n            more: {\n              stuff: true, \n              rules: 3,\n              but: '',\n              you: null,\n              dont: undefined\n            }\n          };\n\n          var processed = app.utils.trim(data);\n\n          var expected = {\n            first_name: 'Tester',\n            last_name: 'Jones',\n            more: {\n              stuff: true,\n              rules: 3\n            }\n          };\n\n          expect(processed).toEqual(expected);\n        });\n\n      });\n\n      // app.utils.prettyMoney\n      \n      describe('app.utils.prettyMoney', function() {\n        it('should return prettified positive currency', function() {\n\n          var check = app.utils.prettyMoney('20.00');\n          expect(check).toEqual('$20.00');\n        });\n\n        it('should return prettified negative currency', function() {\n\n          var check = app.utils.prettyMoney('-20.00');\n          expect(check).toEqual('-$20.00');\n        });\n      });\n\n      // app.utils.prettyPhone\n      \n      describe('app.utils.prettyPhone', function() {\n        it('should return prettified phone number', function() {\n\n          var check = app.utils.prettyPhone('6175551234');\n          expect(check).toEqual('(617) 555-1234');\n        });\n\n        it('should return undefined for invalid phone', function() {\n\n          var check = app.utils.prettyPhone('617555123467');\n          expect(check).toBeFalsy();\n        });\n      });\n\n      // app.utils.uglyPhone\n      \n      describe('app.utils.uglyPhone', function() {\n        it('should return uglified phone number', function() {\n\n          var check = app.utils.uglyPhone('(617) 555-1234');\n          expect(check).toEqual('6175551234');\n        });\n\n        it('should return false for invalid phone number', function() {\n\n          var check = app.utils.uglyPhone('(617) 555-1234234234');\n          expect(check).toBeFalsy();\n        });\n      });\n\n      // app.utils.findVal\n      \n      describe('app.utils.findVal', function() {\n        it('should return the key of the property which contains desired value at key \"h\"', function() {\n\n          var data = {\n            a: {\n              j: 2,\n              h: 2,\n            },\n            b: {\n              j: 2,\n              h: 3,\n            },\n            c: {\n              j: 2,\n              h: 4,\n            }\n          };\n\n          var check = app.utils.findVal(3, data);\n\n          expect(check).toEqual('b');\n        });\n      });\n\n      // Array.contains\n      \n      describe('Array.contains', function() {\n        it('should return true for 1 in [1,2,3,4,5]', function() {\n          var check = [1,2,3,4.5].contains(1);\n\n          expect(check).toBe(true);\n        });\n\n        it('should return false for 9 in [1,2,3,4,5]', function() {\n          var check = [1,2,3,4.5].contains(9);\n\n          expect(check).toBe(false);\n        });\n\n        it('should return true for 1,2 in [1,2,3,4,5]', function() {\n          var check = [1,2,3,4.5].contains(1, 2);\n\n          expect(check).toBe(true);\n        });\n\n        it('should return false for 1, 9 in [1,2,3,4,5]', function() {\n          var check = [1,2,3,4.5].contains(1, 9);\n\n          expect(check).toBe(false);\n        });\n\n        it('should return true for \"test\" in [1,\"test\", 3, \"more\"]', function() {\n          var check = [1,'test', 3, 'more'].contains(1);\n\n          expect(check).toBe(true);\n        });\n      });\n\n      // String.contains\n      \n      describe('String.contains', function() {\n        it('should return true for \"a\" in \"apple\"', function() {\n          var check = 'apple'.contains('a');\n\n          expect(check).toBe(true);\n        });\n\n        it('should return false for \"a\" in \"zoology\"', function() {\n          var check = 'zoology'.contains('a');\n\n          expect(check).toBe(false);\n        });\n\n        it('should return true for \"a\", \"p\" in \"apple', function() {\n          var check = 'apple'.contains('a', 'p');\n\n          expect(check).toBe(true);\n        });\n\n        it('should return false for \"a\", \"p\" in \"zoology', function() {\n          var check = 'zoology'.contains('a', 'p');\n\n          expect(check).toBe(false);\n        });\n\n        it('should return true for \"test\" in \"this is a test string\"', function() {\n          var check = 'this is a test string'.contains('test');\n\n          expect(check).toBe(true);\n        });\n      });\n\n      // String.insert\n      \n      describe('String.insert', function() {\n        it('should return \"apple\" for \"l\", 3 in \"appe\" ', function() {\n          var check = 'appe'.insert('l', 3);\n\n          expect(check).toMatch('apple');\n        });\n\n        it('should append arg to the end of string if no second arg is passed', function() {\n          var check = 'this is a '.insert('test');\n\n          expect(check).toMatch('this is a test');\n        });\n\n        it('should prepend to string if index < 0 is passed', function() {\n          var check = ' is a test'.insert('this', -1);\n\n          expect(check).toMatch('this is a test');\n        });\n\n      });\n      \n      // jasmine needs this to fire properly\n      window.onload();\n      \n      var self = this;\n      setTimeout(function() {\n        self.showUnitTests();\n      }, 300);\n    }\n\n  });\n});\n"]}