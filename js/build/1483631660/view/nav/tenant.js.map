{"version":3,"sources":["view/nav/tenant.js"],"names":["define","app","NavTemplate","Backbone","View","extend","className","template","_","events","click .action-logout","initialize","router","on","route","params","this","update","render","currentRoute","getRoute","split","$container","find","removeClass","addClass","$","$el","html","logo","templates","views","appView","logout","self","controls","then","toggleNav","toggleClass"],"mappings":"AAIAA,QACE,MACA,kCAEF,SAASC,EAAKC,GAEZ,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,WAEXC,SAAUC,EAAED,SAASL,GAErBO,QACEC,uBAAwB,UAG1BC,WAAY,WAQV,MAPAV,GAAIW,OAAOC,GAAG,QAAS,SAASC,EAAOC,GACrCC,KAAKC,UACJD,MAEHA,KAAKE,SACLF,KAAKC,SAEED,MAGTC,OAAQ,WACN,GAAIE,GAAelB,EAAIW,OAAOQ,WAAWC,MAAM,KAAK,EACpDL,MAAKM,WAAWC,KAAK,WAAWC,YAAY,UAC5CR,KAAKM,WAAWC,KAAK,YAAcJ,EAAe,MAAMM,SAAS,UACjET,KAAKM,WAAWE,YAAY,UAC5BE,EAAE,sBAAsBF,YAAY,WAGtCN,OAAQ,WAON,MANAF,MAAKW,IAAIC,KAAKZ,KAAKT,UACjBsB,KAAM5B,EAAI6B,UAAUD,UAGtBb,KAAKM,WAAarB,EAAI8B,MAAMC,QAAQL,IAAIJ,KAAK,OAEtCP,MAGTiB,OAAQ,WACN,GAAIC,GAAOlB,IACXf,GAAIkC,SAASF,SAASG,KAAK,WAEzBF,EAAKZ,WAAWE,YAAY,aAIhCa,UAAW,WACTrB,KAAKW,IAAIW,YAAY","file":"tenant.js","sourcesContent":["/**\n * nav/tenant.js\n */\n\ndefine([\n  'app',\n  'text!templates/nav/tenant.html'\n],\nfunction(app, NavTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'scroll-y',\n\n    template: _.template(NavTemplate),\n\n    events: {\n      'click .action-logout': 'logout',\n    },\n\n    initialize: function() {\n      app.router.on('route', function(route, params) {\n        this.update();\n      }, this);\n\n      this.render();\n      this.update();\n\n      return this;\n    },\n\n    update: function() {\n      var currentRoute = app.router.getRoute().split('?')[0];\n      this.$container.find('ul li a').removeClass('active');\n      this.$container.find('a[href=\"/' + currentRoute + '\"]').addClass('active');\n      this.$container.removeClass('active');\n      $('.action-toggle-nav').removeClass('active');\n    },\n\n    render: function() {\n      this.$el.html(this.template({ \n        logo: app.templates.logo(),\n      }));\n\n      this.$container = app.views.appView.$el.find('nav');\n\n      return this;\n    },\n\n    logout: function() {\n      var self = this;\n      app.controls.logout().then(function() {\n        // by the time this fires, the dom no longer contains nav\n        self.$container.removeClass('active');\n      });\n    },\n\n    toggleNav: function() {\n      this.$el.toggleClass('active');\n    }\n    \n  });\n});"]}