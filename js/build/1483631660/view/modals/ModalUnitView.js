define(["app","view/modals/ModalView","model/properties/UnitModel","text!templates/modals/modal-unit.html"],function(t,e,n,i){return e.extend({title:function(){var e=t.utils.capitalize(this.action);return e+" Unit"},messages:{success:"The unit has been saved",error:"The unit could not be saved"},template:_.template(i),initialize:function(t){t&&_.extend(this,t),this.parentModel=this.context.parentModel,this.model=new n(null,{parentModelId:this.parentModel.get("_id")}),this.renderModalView()},render:function(){this.ready({unit:this.model.toJSON()});var t=this.$el.find('input[name="beds"], input[name="baths"]');t.mask("zzzz",{translation:{z:{pattern:/[0-9\.]/}}});var e=this.$el.find('input[name="sq_ft"]');return e.mask("000000"),this},confirm:function(){var e=this,n=this.constructData();return n.property=this.parentModel.get("_id"),!!t.utils.validate(this,n)&&void this.model.save(n).then(function(){e.context.trigger(e.eventName),e.closeModal()}).fail(function(e){var n,i=e.responseJSON;n=i.message.contains("duplicate","key")?"There is already a unit with that number on the property":"Sorry, unable to create unit at this time.",t.alerts.error(n),console.warn(arguments)})}})});
//# sourceMappingURL=ModalUnitView.js.map
