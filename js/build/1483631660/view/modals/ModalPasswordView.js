define(["app","view/modals/ModalView","text!templates/modals/modal-password.html"],function(e,r,s){return r.extend({title:"Change Password",events:{"click .action-confirm":"validatePassword"},messages:{success:"Your password has been updated",error:"Your password could not be updated"},template:_.template(s),initialize:function(r){r&&_.extend(this,r);var s=this.context.model.toJSON(),o=e.models.AccountModel;this.model=new o(s,{action:"password"}),this.renderModalView()},render:function(){return this.ready(),e.controls.renderPasswordFields(this),this},validatePassword:function(r){var s=this.$el.find(".password"),o=this.$el.find(".password-confirm"),t=!1;return s.val()||(e.controls.fieldError({element:s,error:"Password is required"}),t=!0),!t&&(Backbone.Validation.patterns.password.test(s.val())||(e.controls.fieldError({element:s,error:Backbone.Validation.messages.password}),t=!0),o.val()!==s.val()&&(e.controls.fieldError({element:o,error:"Passwords must match"}),t=!0),o.val()||(e.controls.fieldError({element:o,error:"Please confirm your password"}),t=!0),!t&&void this.confirm(r))},constructData:function(){var e={current_password:this.$el.find(".current").val(),password:this.$el.find(".password").val()};return e}})});
//# sourceMappingURL=ModalPasswordView.js.map
