define(["backbone","text!templates/modals/modal-dialog.html"],function(e,i){return e.View.extend({events:{keyup:"keyControl","click .action-confirm":"confirm","click .action-cancel":"closeModal","click .overlay":"closeModal"},keyControl:function(e){if(e.preventDefault(),27===e.which)this.closeModal();else if(13===e.which){if(this.app.utils.getFocused().parentNode.className.contains("actions"))return;this.confirm()}},template:_.template(i),initialize:function(e){e&&_.extend(this,e),this.app.views.appView&&this.app.views.appView.trigger("modalOpened"),this.app.views.modalView=this},render:function(){return this.eventName||(this.eventName="confirm"),this.$el.html(this.template({dialog:this.model})),$(".modal-container").html(this.$el).addClass("visible"),this.$el.find(".action-confirm").focus(),this},closeModal:function(){$(".modal-container").removeClass("visible"),this.app.views.appView&&this.app.views.appView.trigger("modalClosed"),this.close()},confirm:function(){this.context.trigger(this.eventName),this.closeModal()}})});
//# sourceMappingURL=ModalDialogView.js.map
