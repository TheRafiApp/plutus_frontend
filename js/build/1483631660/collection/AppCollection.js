define(["app"],function(t){var e=Backbone.Collection.extend({idAttribute:"_id",sort_key:"_id",initialize:function(t,e){return e||(e={}),this.options||(this.options={}),this.options=_.extend(this.options,e),this},comparator:function(t){return t.get(this.sort_key)},sortByField:function(t,e){this.sort_key=t,this.sort()},search:function(t){var r;t.constructor===Array?(r={},t.forEach(function(t,e){r[t.toLowerCase()]=0})):t.constructor===String&&(t=t.toLowerCase());var n=this.filter(function(e){var n,i=!1,o=_.omit(e.attributes,e.search_filters);r&&(n=_.extend({},r));for(var s in o)if("string"==typeof o[s])if(n)for(var a in n)(""+o[s]).toLowerCase().indexOf(a)>-1&&n[a]++;else"string"==typeof t&&(""+o[s]).toLowerCase().indexOf(t)>-1&&(i=!0);return n?_.every(_.values(n),function(t){return t>0}):i});return new e(n)},filters:function(t){var r=this.filter(function(e){var r=(_.omit(e.attributes,e.search_filters),{}),n={};for(var i in t)0!==t[i].length&&(r[i]={},n[i]=!1,t[i].dates?r[i].dates=e.get(i):t[i].forEach(function(n){r[i][n]=0;var o=e.get(i);t[i].indexOf(o.toString())>-1&&r[i][n]++}));for(var o in r)if("object"==typeof r[o]&&r[o].dates){var s=moment(t[o].dates[0]),a=moment(t[o].dates[1]);n[o]=_.every(r[o],function(t){var e=moment.utc(t);return s<=e&&e<=a})}else n[o]=_.some(_.values(r[o]),function(t){return t>0});return _.every(_.values(n),function(t){return t===!0})});return new e(r)}});return e});
//# sourceMappingURL=AppCollection.js.map
