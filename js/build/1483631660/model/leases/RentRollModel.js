define(["app"],function(e){var t=e.Model.extend({name:"rent roll entry",displayName:"full_address",urlRoot:function(){return e.API()+"rentroll/"},defaults:{today:""},filters:["today","active_lease"],full_address:Backbone.computed("number","property",function(){if(this.isNew())return"";var e=this.get("property");return e?_.escape(e.address+" #"+this.get("number")||""):""}),active_lease:Backbone.computed("today","leases",function(){if(this.isNew())return"";var e=this.get("leases");if(!e||0===e.length)return!1;var t=this.get("today");t?date=moment.utc(t):date=moment.utc();var n=!1;return e.forEach(function(e){if(!e.end_date)return void(n=e);var t=moment.utc(e.start_date),r=moment.utc(e.end_date);t<date&&date<r&&(n=e)}),n}),occupied:Backbone.computed("active_lease",function(){if(this.isNew())return"";var e=this.get("active_lease");return!!e}),income:Backbone.computed("active_lease",function(){if(this.isNew())return!1;var e=this.get("active_lease");return"undefined"!=typeof e&&(e?e.rent:-this.get("rent"))}),income_pretty:Backbone.computed("income",function(){var t=this.get("income");if(t)return e.utils.prettyMoney(t)}),length:Backbone.computed("active_lease",function(){if(this.isNew())return"";var e=this.get("active_lease");if(!e)return null;if(!e.end_date)return"Indefinite";var t=moment.utc(e.start_date),n=moment.utc(e.end_date).add("days",1),r=moment.duration(n.diff(t));return{months:r.asMonths(),days:r.asDays()}})});return t});
//# sourceMappingURL=RentRollModel.js.map
