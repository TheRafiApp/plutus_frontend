{"version":3,"sources":["model/companies/CompanyModel.js"],"names":["define","app","CompanyModel","Model","extend","name","displayName","defaults","urlRoot","API","schema","admin","phone","type","validation","required","admin.first_name","maxLength","admin.last_name","admin.email","input","field","attributes","utils","validateContact","admin.phone","email"],"mappings":"AAIAA,QACC,OAED,SAASC,GAER,GAAIC,GAAeD,EAAIE,MAAMC,QAE1BC,KAAM,UACNC,YAAa,OAEbC,UACEF,KAAM,MAGRG,QAAS,WACP,MAAOP,GAAIQ,MAAQ,cAGrBC,QACEC,OACEC,OACEC,KAAM,WAKZC,YAEET,MACEU,UAAU,GAIZC,oBACED,UAAU,EACVE,UAAW,IAGbC,mBACEH,UAAU,EACVE,UAAW,IAGbE,cAAe,SAASC,EAAOC,EAAOC,GACpC,IAAKF,IAAUE,EAAWX,MAAMC,MAC9B,MAAO,6CACF,IAAKU,EAAWX,MAAMC,OAG3B,GAAIQ,IACGnB,EAAIsB,MAAMC,gBAAgBJ,GAAQ,MAAO,yCAHhD,KAAKnB,EAAIsB,MAAMC,gBAAgBJ,GAAQ,MAAO,sCAOlDK,cAAe,SAASL,EAAOC,EAAOC,GACrC,IAAKF,IAAUE,EAAWX,MAAMe,MAC7B,MAAO,6CACF,IAAKJ,EAAWX,MAAMe,OAG3B,GAAIN,IACGnB,EAAIsB,MAAMC,gBAAgBJ,GAAQ,MAAO,wCAHhD,KAAKnB,EAAIsB,MAAMC,gBAAgBJ,GAAQ,MAAO,uCAWvD,OAAOlB","file":"CompanyModel.js","sourcesContent":["/**\n * CompanyModel.js\n */\n\ndefine([\n\t'app'\n],\nfunction(app) {\n\n\tvar CompanyModel = app.Model.extend({\n\n    name: 'company',\n    displayName: 'name',\n\n    defaults: {\n      name: null\n    },\n\n    urlRoot: function() {\n      return app.API() + 'companies/';\n    },\n\n    schema: {\n      admin: {\n        phone: {\n          type: 'phone'\n        }\n      }\n    },\n\n    validation: {\n      // company data\n      name: {\n        required: true\n      },\n\n      // manager data\n      'admin.first_name': {\n        required: true,\n        maxLength: 60,\n        // pattern: 'alphabetical'\n      },\n      'admin.last_name': {\n        required: true,\n        maxLength: 60,\n        // pattern: 'alphabetical'\n      },\n      'admin.email': function(input, field, attributes) {\n        if (!input && !attributes.admin.phone) {\n          return 'You must enter at least one contact method.';\n        } else if (!attributes.admin.phone) {\n          if (!app.utils.validateContact(input)) return 'Please enter a valid email address';\n        } else {\n          if (input) {\n            if (!app.utils.validateContact(input)) return 'Please enter a valid email address';\n          }\n        }\n      },\n      'admin.phone': function(input, field, attributes) {\n       if (!input && !attributes.admin.email) {\n          return 'You must enter at least one contact method.';\n        } else if (!attributes.admin.email) {\n          if (!app.utils.validateContact(input)) return 'Please enter a valid phone number';\n        } else {\n          if (input) {\n            if (!app.utils.validateContact(input)) return 'Please enter a valid phone number';\n          }\n        }\n      }\n    }\n\n\t});\n\n\treturn CompanyModel; \n\n});\n\n/* Sample Data\n\n{\n  \"name\": \"Aqua Teen Hunger Force\",\n  \"manager\": {\n    \"first_name\": \"Fry\",\n    \"last_name\": \"Lock\",\n    \"email\": \"fry.lock3@mailinator.com\"\n  }\n}\n\n*/"]}