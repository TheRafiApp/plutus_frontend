{"version":3,"sources":["view/WebhookView.js"],"names":["define","app","WebhookTemplate","Backbone","View","extend","className","events","click .action-delete","template","_","initialize","this","on","confirmDelete","render","data","model","toJSON","$el","html","webhook","promptDelete","target","get","message","controls","modalConfirm","self","url","JSON","stringify","destroy","then","fadeOut","console","log","arguments","alerts","error"],"mappings":"AAIAA,QACE,MACA,wCAEF,SAASC,EAAKC,GAEZ,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,UAEXC,QACEC,uBAAwB,gBAG1BC,SAAUC,EAAED,SAASP,GAErBS,WAAY,WAEVC,KAAKC,GAAG,gBAAiBD,KAAKE,cAAeF,MAC7CA,KAAKG,UAGPA,OAAQ,WACN,GACIC,GAAOJ,KAAKK,MAAMC,QAItB,OAFAN,MAAKO,IAAIC,KAAKR,KAAKH,UAAWY,QAASL,KAEhCJ,MAGTU,aAAc,WACZ,GAAIC,GAASX,KAAKK,MAAMO,IAAI,OACxBC,EAAU,mCAAqCF,EAAS,GAE5DtB,GAAIyB,SAASC,aAAaF,EAAS,gBAAiBb,OAGtDE,cAAe,WACb,GAAIc,GAAOhB,KAEPI,GACFa,IAAKD,EAAKX,MAAMO,IAAI,OAGtBR,GAAOc,KAAKC,UAAUf,GAEtBJ,KAAKK,MAAMe,SACThB,KAAMA,IACLiB,KAAK,WACNL,EAAKT,IAAIe,QAAQ,iBACRN,MAGR,WACDO,QAAQC,IAAIC,WACZpC,EAAIqC,OAAOC,MAAM","file":"WebhookView.js","sourcesContent":["/**\n * WebhookView.js\n */\n\ndefine([\n  'app',\n  'text!templates/webhooks/webhook.html'\n],\nfunction(app, WebhookTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'webhook',\n\n    events: {\n      'click .action-delete': 'promptDelete'\n    },\n\n    template: _.template(WebhookTemplate),\n\n    initialize: function() {\n      var self = this;\n      this.on('confirmDelete', this.confirmDelete, this);\n      this.render();\n    },\n\n    render: function() {\n      var self = this;\n      var data = this.model.toJSON();\n \n      this.$el.html(this.template({ webhook: data }))\n\n      return this;\n    },\n\n    promptDelete: function() {\n      var target = this.model.get('url')\n      var message = 'Are you sure you want to delete ' + target + '?';\n\n      app.controls.modalConfirm(message, 'confirmDelete', this);\n    },\n\n    confirmDelete: function() {\n      var self = this;\n\n      var data = {\n        url: self.model.get('url')\n      }\n\n      data = JSON.stringify(data);\n\n      this.model.destroy({ \n        data: data\n      }).then(function() {\n        self.$el.fadeOut(function() {\n          delete self;\n        });\n        //self.parentView.render();\n      }, function() {\n        console.log(arguments)\n        app.alerts.error('Couldn\\'t delete the webhook')\n      })\n    }\n\n  });\n});"]}