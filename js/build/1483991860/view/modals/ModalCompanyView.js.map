{"version":3,"sources":["view/modals/ModalCompanyView.js"],"names":["define","app","ModalView","CompanyModel","ModalCompanyTemplate","extend","eventName","template","_","title","this","action","initialize","_options","model","renderModalView","render","ready","handleError","e","message","error","responseJSON","contains","data","key","alerts"],"mappings":"AAIAA,QACE,MACA,wBACA,+BACA,4CAEF,SACEC,EACAC,EACAC,EACAC,GAGA,MAAOF,GAAUG,QAEfC,UAAW,UAEXC,SAAUC,EAAED,SAASH,GAErBK,MAAO,WACL,MAAOC,MAAKC,OAAS,YAGvBC,WAAY,SAASC,GACfA,GAAUL,EAAEH,OAAOK,KAAMG,GAExBH,KAAKI,QAAOJ,KAAKI,MAAQ,GAAIX,GAAa,MAC7CQ,OAAQ,YAGVD,KAAKK,mBAGPC,OAAQ,WAGN,MAFAN,MAAKO,QAEEP,MAGTQ,YAAa,SAASC,GACpB,GACIC,GADAC,EAAQF,EAAEG,YAEVD,GAAMD,QAAQG,SAAS,YAAa,QACtCH,EAAU,qCAEa,UAAnBC,EAAMG,KAAKC,IACbL,GAAW,gBACiB,UAAnBC,EAAMG,KAAKC,MACpBL,GAAW,mBAGbA,EAAU,gDAEZnB,EAAIyB,OAAOL,MAAMD","file":"ModalCompanyView.js","sourcesContent":["/**\n * ModalCompanyView.js\n */\n\ndefine([\n  'app',\n  'view/modals/ModalView',\n  'model/companies/CompanyModel',\n  'text!templates/modals/modal-company.html'\n],\nfunction(\n  app, \n  ModalView, \n  CompanyModel,\n  ModalCompanyTemplate\n) {\n\n  return ModalView.extend({\n    \n    eventName: 'confirm',\n\n    template: _.template(ModalCompanyTemplate),\n\n    title: function() {\n      return this.action + ' Company';\n    },\n\n    initialize: function(_options) {\n      if (_options) _.extend(this, _options);\n\n      if (!this.model) this.model = new CompanyModel(null, {\n        action: 'invite'\n      });\n\n      this.renderModalView();\n    },\n\n    render: function() {\n      this.ready();\n\n      return this;\n    },\n\n    handleError: function(e) {\n      var error = e.responseJSON;\n      var message;\n      if (error.message.contains('duplicate', 'key')) {\n        message = 'There is already a user with that ';\n\n        if (error.data.key === 'phone') {\n          message += 'phone number.';\n        } else if (error.data.key === 'email') {\n          message += 'email address.';\n        }\n      } else {\n        message = 'Sorry, unable to create company at this time.';\n      }\n      app.alerts.error(message);\n    }\n\n  });\n});"]}