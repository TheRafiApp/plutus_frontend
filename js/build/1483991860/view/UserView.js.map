{"version":3,"sources":["view/UserView.js"],"names":["define","app","ModelView","UserModel","UserTemplate","Backbone","View","extend","className","events","click .action-reinvite","template","_","initialize","options","this","self","role","router","getRoute","model","_id","fetch","then","render","context","edit","delete","$el","html","resendInvitation","alerts","success","get","e","console","warn","error"],"mappings":"AAIAA,QACE,MACA,iBACA,wBACA,kCAEF,SAASC,EAAKC,EAAWC,EAAWC,GAElC,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,YAEXC,QACEC,yBAA0B,oBAG5BC,SAAUC,EAAED,SAASP,GAErBS,WAAY,SAASC,GACnBF,EAAEL,OAAOQ,KAAMD,EACf,IAAIE,GAAOD,KACPE,EAAOhB,EAAIiB,OAAOC,UAEtBJ,MAAKK,MAAQ,GAAIjB,IAAYkB,IAAKN,KAAKM,MAASJ,KAAMA,IACtDF,KAAKK,MAAME,QAAQC,KAAK,WACtBP,EAAKQ,YAITA,OAAQ,WAaN,MAXAT,MAAKb,UAAY,GAAIA,IACnBuB,QAASV,KAETD,SACEY,MAAM,EACNC,QAAQ,KAIZZ,KAAKa,IAAIC,KAAKd,KAAKb,UAAU0B,KAEtBb,MAGTe,iBAAkB,WAChB,GAAId,GAAOD,IAEXA,MAAKK,MAAMU,mBAAmBP,KAAK,WACjCtB,EAAI8B,OAAOC,QAAQ,iCAAmChB,EAAKI,MAAMa,IAAI,eACpE,SAASC,GACVC,QAAQC,KAAKF,GACbjC,EAAI8B,OAAOM,MAAM","file":"UserView.js","sourcesContent":["/**\n * UserView.js\n */\n\ndefine([\n  'app',\n  'view/ModelView',\n  'model/users/UserModel',\n  'text!templates/users/user.html'\n],\nfunction(app, ModelView, UserModel, UserTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'user-view',\n\n    events: {\n      'click .action-reinvite': 'resendInvitation'\n    },\n\n    template: _.template(UserTemplate),\n\n    initialize: function(options) {\n      _.extend(this, options);\n      var self = this;\n      var role = app.router.getRoute();\n\n      this.model = new UserModel({ _id: this._id }, { role: role });\n      this.model.fetch().then(function() {\n        self.render();\n      });\n    },\n\n    render: function() {\n\n      this.ModelView = new ModelView({\n        context: this,\n\n        options: {\n          edit: true,\n          delete: true  \n        }\n      });\n\n      this.$el.html(this.ModelView.$el);\n\n      return this;\n    },\n\n    resendInvitation: function() {\n      var self = this;\n\n      this.model.resendInvitation().then(function() {\n        app.alerts.success('Invitation has been resent to ' + self.model.get('full_name'));\n      }, function(e) {\n        console.warn(e);\n        app.alerts.error('Could not resend invitation...');\n      });\n    }\n\n    // constructData: function() {\n    //   var self = this;\n    //   var $form = this.$el.find('.form-model');\n    //   var data_array = $form.serializeArray();\n    //   var formData = {};\n\n    //   $.map(data_array, function(x) {\n    //     formData[x['name']] = x['value'];\n    //   });\n\n    // }\n\n  });\n});"]}