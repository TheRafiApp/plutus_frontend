{"version":3,"sources":["view/WebhooksView.js"],"names":["define","app","WebhookView","ModalWebhookView","WebhooksCollection","WebhooksTemplate","Backbone","View","extend","className","events","click .action-add","initialize","self","this","template","_","on","collection","fetch","then","render","console","warn","arguments","$el","html","each","model","find","append","parentView","removeClass","addWebhook","modal","action","eventName","context"],"mappings":"AAIAA,QACE,MACA,mBACA,+BACA,sCACA,yCAEF,SAASC,EAAKC,EAAaC,EAAkBC,EAAoBC,GAE/D,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,gBAEXC,QACEC,oBAAqB,cAIvBC,WAAY,WACV,GAAIC,GAAOC,IACXA,MAAKC,SAAWC,EAAED,SAASV,GAE3BS,KAAKG,GAAG,WAAYH,KAAKF,WAAYE,MAErCA,KAAKI,WAAa,GAAId,GACtBU,KAAKI,WAAWC,QAAQC,KAAK,WAC3BP,EAAKQ,UACJ,WACDC,QAAQC,KAAKC,WACbX,EAAKQ,YAKTA,OAAQ,WACN,GAAIR,GAAOC,IAiBX,OAfAA,MAAKW,IAAIC,KAAKZ,KAAKC,YAEnBD,KAAKI,WAAWS,KAAK,SAASC,GAC5Bf,EAAKY,IAAII,KAAK,aAAaC,OAAO,GAAI5B,IACpC0B,MAAOA,EACPG,WAAYlB,IACXY,OAOLX,KAAKW,IAAIO,YAAY,WAEdlB,MAGTmB,WAAY,WACVnB,KAAKoB,MAAQ,GAAI/B,IACfgC,OAAQ,MACRC,UAAW,WACXC,QAASvB","file":"WebhooksView.js","sourcesContent":["/**\n * WebhooksView.js\n */\n\ndefine([\n  'app',\n  'view/WebhookView',\n  'view/modals/ModalWebhookView',\n  'collection/admin/WebhooksCollection',\n  'text!templates/webhooks/webhooks.html'\n],\nfunction(app, WebhookView, ModalWebhookView, WebhooksCollection, WebhooksTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'panel loading',\n\n    events: {\n      'click .action-add': 'addWebhook',\n      // 'click .action-cancel': 'toggleAddForm'\n    },\n\n    initialize: function() {\n      var self = this;\n      this.template = _.template(WebhooksTemplate);\n\n      this.on('addModel', this.initialize, this);\n\n      this.collection = new WebhooksCollection();\n      this.collection.fetch().then(function() {\n        self.render();\n      }, function() {\n        console.warn(arguments)\n        self.render();\n      });\n      \n    },\n\n    render: function() {\n      var self = this;\n\n      this.$el.html(this.template());\n\n      this.collection.each(function(model) {\n        self.$el.find('.webhooks').append(new WebhookView({ \n          model: model,\n          parentView: self\n        }).$el);\n      });\n\n      // this.$el.find('.scroll-y').append(new WebhookAddView({\n      //   parentView: this\n      // }).$el);\n\n      this.$el.removeClass('loading');\n\n      return this;\n    },\n\n    addWebhook: function() {\n      this.modal = new ModalWebhookView({\n        action: 'add',\n        eventName: 'addModel',\n        context: this\n      });\n    },\n\n    // toggleAddForm: function() {\n    //   var $form = this.$el.find('form.add-model');\n    //   var $btn = this.$el.find('.action-add');\n    //   var $cancel = this.$el.find('.action-cancel');\n\n    //   if ($form.hasClass('hidden')) {\n    //     $form.removeClass('hidden');\n    //     $btn.addClass('hidden');\n    //     $cancel.removeClass('hidden');\n    //   } else {\n    //     $form.addClass('hidden');\n    //     $btn.removeClass('hidden');\n    //     $cancel.addClass('hidden');\n    //   }\n    // }\n\n  });\n});"]}