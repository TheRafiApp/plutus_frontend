{"version":3,"sources":["view/account/Decline.js"],"names":["define","app","MyLeasesCollection","DeclineTemplate","Backbone","View","extend","className","events","click .action-confirm","click .action-accept","template","_","initialize","options","this","render","$el","html","$","removeClass","beginActivation","query_string","url","router","navigate","trigger","replace","sendToken","self","tokenData","token","session","declineInvitation","then","showConfirm","fail","error","alerts","find","addClass"],"mappings":"AAIAA,QACE,MACA,uCACA,+CAEF,SAASC,EAAKC,EAAoBC,GAEhC,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,UAEXC,QACEC,wBAAyB,YACzBC,uBAAwB,mBAG1BC,SAAUC,EAAED,SAASR,GAErBU,WAAY,SAASC,GAEnBC,KAAKC,UAGPA,OAAQ,WAMN,MAHAD,MAAKE,IAAIC,KAAKH,KAAKJ,YACnBQ,EAAE,QAAQC,YAAY,WAEfL,MAGTM,gBAAiB,WACf,GAAIC,GAAerB,EAAIsB,IAAID,cAC3BrB,GAAIuB,OAAOC,SAAS,aAAeH,GAAgBI,SAAS,EAAMC,SAAS,KAG7EC,UAAW,WACT,GAAIC,GAAOd,KAEPO,EAAerB,EAAIsB,IAAID,eACvBQ,GACFC,MAAOT,EAGTrB,GAAI+B,QAAQC,kBAAkBH,GAAWI,KAAK,WAC5CL,EAAKM,gBACJC,KAAK,SAASC,GACfpC,EAAIqC,OAAOD,MAAM,qCAIrBF,YAAa,WACXpB,KAAKE,IAAIsB,KAAK,YAAYnB,YAAY,WACtCL,KAAKE,IAAIsB,KAAK,iBAAiBC,SAAS","file":"Decline.js","sourcesContent":["/**\n * account/DeclineView.js\n */\n\ndefine([\n  'app',\n  'collection/leases/MyLeasesCollection',\n  'text!templates/account/account-decline.html',\n],\nfunction(app, MyLeasesCollection, DeclineTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'decline',\n\n    events: {\n      'click .action-confirm': 'sendToken',\n      'click .action-accept': 'beginActivation'\n    },\n\n    template: _.template(DeclineTemplate),\n\n    initialize: function(options) {\n      // if (options) _.extend(this, options);\n      this.render();\n    },\n\n    render: function() {\n      var self = this;\n\n      this.$el.html(this.template());\n      $('body').removeClass('loading');\n\n      return this;\n    },\n\n    beginActivation: function() {\n      var query_string = app.url.query_string();\n      app.router.navigate('/activate?' + query_string, { trigger: true, replace: false });\n    },\n\n    sendToken: function() {\n      var self = this;\n\n      var query_string = app.url.query_string();\n      var tokenData = {\n        token: query_string\n      };\n\n      app.session.declineInvitation(tokenData).then(function() {\n        self.showConfirm();\n      }).fail(function(error) {\n        app.alerts.error('Sorry, something went wrong...');\n      });\n    },\n\n    showConfirm: function() {\n      this.$el.find('.visible').removeClass('visible');\n      this.$el.find('.confirmation').addClass('visible');\n    }\n\n  });\n});"]}