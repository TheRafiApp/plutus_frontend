{"version":3,"sources":["view/bills/Current.js"],"names":["define","app","MyBillsCollection","BillCard","MyBillsTemplate","Backbone","View","extend","className","template","_","initialize","_options","this","self","child_views","collection","active","fetch","then","render","$el","html","models","reverse","length","showEmpty","each","model","$bill_card","find","append","push","message","$"],"mappings":"AAIAA,QACE,MACA,qCACA,wBACA,qCAEF,SAASC,EAAKC,EAAmBC,EAAUC,GAEzC,MAAOC,UAASC,KAAKC,QAEnBC,UAAa,QAEbC,SAAUC,EAAED,SAASL,GAErBO,WAAY,SAASC,GACfA,GAAUF,EAAEH,OAAOM,KAAMD,EAC7B,IAAIE,GAAOD,IAEXA,MAAKE,eAELF,KAAKG,WAAa,GAAId,IACpBe,QAAQ,IAEVJ,KAAKG,WAAWE,QAAQC,KAAK,WAC3BL,EAAKM,YAITA,OAAQ,WACN,GAAIN,GAAOD,IAkBX,OAjBAA,MAAKQ,IAAIC,KAAKT,KAAKJ,YAInBI,KAAKG,WAAWO,OAAOC,UAEnBX,KAAKG,WAAWS,OAAS,GAAGZ,KAAKa,YAErCb,KAAKG,WAAWW,KAAK,SAASC,GAC5B,GAAIC,GAAa,GAAI1B,IACnByB,MAAOA,GAGTd,GAAKO,IAAIS,KAAK,aAAaC,OAAOF,EAAWR,KAC7CP,EAAKC,YAAYiB,KAAKH,KAGjBhB,MAGTa,UAAW,WACT,GAAIO,GAAU,wBACdA,IAAW,qEACXA,GAAW,2BACXA,GAAW,yCACXA,GAAW,SAEXpB,KAAKQ,IAAIS,KAAK,aAAaR,KAAKY,EAAED","file":"Current.js","sourcesContent":["/**\n * bills/Current.js\n */\n\ndefine([\n  'app',\n  'collection/bills/MyBillsCollection',\n  'view/cards/bill_large',\n  'text!templates/bills/current.html'\n],\nfunction(app, MyBillsCollection, BillCard, MyBillsTemplate) {\n\n  return Backbone.View.extend({\n\n    'className': 'panel',\n    \n    template: _.template(MyBillsTemplate),\n\n    initialize: function(_options) {\n      if (_options) _.extend(this, _options);\n      var self = this;\n\n      this.child_views = [];\n\n      this.collection = new MyBillsCollection({\n        active: true\n      });\n      this.collection.fetch().then(function() {\n        self.render();\n      });\n    },\n\n    render: function() {\n      var self = this;\n      this.$el.html(this.template());\n\n      // sort bills by due date, reverse\n      // this.collection.sortByField('due_date');\n      this.collection.models.reverse();\n\n      if (this.collection.length < 1) this.showEmpty();\n      \n      this.collection.each(function(model) {\n        var $bill_card = new BillCard({\n          model: model\n        });\n\n        self.$el.find('.scroll-y').append($bill_card.$el);\n        self.child_views.push($bill_card);\n      });\n\n      return this;\n    },\n\n    showEmpty: function() {\n      var message = '<div class=\"no-bills\">';\n      message += '<div class=\"icon-container\"><div class=\"icon success\"></div></div>';\n      message += '<h2>You\\'re all set!</h2>';\n      message += '<p>You have no bills at this time.</p>';\n      message += '</div>';\n\n      this.$el.find('.scroll-y').html($(message));\n    }\n\n  });\n});"]}