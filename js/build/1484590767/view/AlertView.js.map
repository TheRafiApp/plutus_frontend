{"version":3,"sources":["view/AlertView.js"],"names":["define","app","AlertTemplate","Backbone","View","extend","events","click","mouseenter","mouseleave","duration","template","_","initialize","options","alerts","dismiss","views","alertView","this","render","self","$el","html","alert","$alert","find","slideIn","setTimeout","addClass","clearTimeout","beginTimeout","removeClass","autoClose","closeAlert","delayTimeout","event","fadeOut","close"],"mappings":"AAIAA,QACE,MACA,6BAEF,SAASC,EAAKC,GAEZ,MAAOC,UAASC,KAAKC,QAInBC,QACEC,MAAS,aACTC,WAAc,eACdC,WAAc,gBAGhBC,SAAU,IAEVC,SAAUC,EAAED,SAAST,GAErBW,WAAY,SAASC,GAGnBb,EAAIc,OAAOC,UACXf,EAAIgB,MAAMC,UAAYC,KAEtBA,KAAKC,OAAON,IAGdM,OAAQ,SAASN,GACf,GAAIO,GAAOF,IAEXA,MAAKG,IAAIC,KAAKJ,KAAKR,UAAWa,MAAOV,KACrCK,KAAKM,OAASN,KAAKG,IAAII,KAAK,SAI5B,IAAIC,GAAUC,WAAW,WAEvBP,EAAKI,OAAOI,SAAS,WACrBC,aAAaH,IACZ,GAKH,OAFAR,MAAKY,eAEEZ,MAGTY,aAAc,WACZ,GAAIV,GAAOF,IAEXA,MAAKM,OAAOO,YAAY,WACxBb,KAAKc,UAAYL,WAAW,WAC1BP,EAAKa,aACLJ,aAAaX,KAAKc,YACjBd,KAAKT,WAKVyB,aAAc,WAIZhB,KAAKM,OAAOI,SAAS,WACrBC,aAAaX,KAAKc,YAGpBC,WAAY,SAASE,GACnB,GAAIf,GAAOF,IACXW,cAAaX,KAAKc,iBACXhC,GAAIgB,MAAMC,UAEjBC,KAAKM,OAAOY,QAAQ,IAAK,WAEvBhB,EAAKiB","file":"AlertView.js","sourcesContent":["/**\n * AlertView.js\n */\n\ndefine([\n  'app',\n  'text!templates/alert.html'\n],\nfunction(app, AlertTemplate) {\n\n  return Backbone.View.extend({\n\n    // el: '.alerts',\n\n    events: {\n      'click': 'closeAlert',\n      'mouseenter': 'delayTimeout',\n      'mouseleave': 'beginTimeout'\n    },\n\n    duration: 6000,\n\n    template: _.template(AlertTemplate),\n\n    initialize: function(options) {\n\n      // dismiss existing alert\n      app.alerts.dismiss();\n      app.views.alertView = this;\n\n      this.render(options);\n    },\n\n    render: function(options) {\n      var self = this;\n\n      this.$el.html(this.template({ alert: options }));\n      this.$alert = this.$el.find('.alert');\n\n\n      // Add class to slide in from top\n      var slideIn = setTimeout(function() {\n        // $alert.addClass('current');\n        self.$alert.addClass('current');\n        clearTimeout(slideIn);\n      }, 10);\n\n      // Only show alert for 6 seconds\n      this.beginTimeout();\n\n      return this;\n    },\n\n    beginTimeout: function() {\n      var self = this;\n\n      this.$alert.removeClass('restart');\n      this.autoClose = setTimeout(function() {\n        self.closeAlert();\n        clearTimeout(this.autoClose);\n      }, this.duration);\n\n      // console.log('set: ' + this.autoClose);\n    },\n\n    delayTimeout: function() {\n      // console.log(app.views.alertView);\n      // console.log('clear: ' + this.autoClose);\n\n      this.$alert.addClass('restart');\n      clearTimeout(this.autoClose);\n    },\n\n    closeAlert: function(event) {\n      var self = this;\n      clearTimeout(this.autoClose);\n      delete app.views.alertView;\n\n      this.$alert.fadeOut(300, function() {\n        // $(this).remove();\n        self.close();\n      });\n    }\n\n  });\n});"]}