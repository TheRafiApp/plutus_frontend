{"version":3,"sources":["view/MyleasesView.js"],"names":["define","app","MyLeasesCollection","LeaseCard","MyLeasesTemplate","Backbone","View","extend","className","template","_","initialize","_options","this","self","child_views","collection","fetch","then","render","$el","html","models","reverse","length","showEmpty","each","model","$lease_card","data","toJSON","find","append","push","message","$"],"mappings":"AAIAA,QACE,MACA,uCACA,yBACA,uCAEF,SAASC,EAAKC,EAAoBC,EAAWC,GAE3C,MAAOC,UAASC,KAAKC,QAEnBC,UAAa,QAEbC,SAAUC,EAAED,SAASL,GAErBO,WAAY,SAASC,GACfA,GAAUF,EAAEH,OAAOM,KAAMD,EAC7B,IAAIE,GAAOD,IAEXA,MAAKE,eAELF,KAAKG,WAAa,GAAId,GACtBW,KAAKG,WAAWC,QAAQC,KAAK,WAC3BJ,EAAKK,YAITA,OAAQ,WACN,GAAIL,GAAOD,IAkBX,OAjBAA,MAAKO,IAAIC,KAAKR,KAAKJ,YAInBI,KAAKG,WAAWM,OAAOC,UAEnBV,KAAKG,WAAWQ,OAAS,GAAGX,KAAKY,YAErCZ,KAAKG,WAAWU,KAAK,SAASC,GAC5B,GAAIC,GAAc,GAAIzB,IACpB0B,KAAMF,EAAMG,UAGdhB,GAAKM,IAAIW,KAAK,aAAaC,OAAOJ,EAAYR,KAC9CN,EAAKC,YAAYkB,KAAKL,KAGjBf,MAGTY,UAAW,WACT,GAAIS,GAAU,wBACdA,IAAW,qEACXA,GAAW,2BACXA,GAAW,0CACXA,GAAW,SAEXrB,KAAKO,IAAIW,KAAK,aAAaV,KAAKc,EAAED","file":"MyleasesView.js","sourcesContent":["/**\n * MyLeasesView.js\n */\n\ndefine([\n  'app',\n  'collection/leases/MyLeasesCollection',\n  'view/cards/lease_small',\n  'text!templates/leases/myleases.html'\n],\nfunction(app, MyLeasesCollection, LeaseCard, MyLeasesTemplate) {\n\n  return Backbone.View.extend({\n\n    'className': 'panel',\n    \n    template: _.template(MyLeasesTemplate),\n\n    initialize: function(_options) {\n      if (_options) _.extend(this, _options);\n      var self = this;\n\n      this.child_views = [];\n\n      this.collection = new MyLeasesCollection();\n      this.collection.fetch().then(function() {\n        self.render();\n      });\n    },\n\n    render: function() {\n      var self = this;\n      this.$el.html(this.template());\n\n      // sort bills by due date, reverse\n      // this.collection.sortByField('due_date');\n      this.collection.models.reverse();\n\n      if (this.collection.length < 1) this.showEmpty();\n      \n      this.collection.each(function(model) {\n        var $lease_card = new LeaseCard({\n          data: model.toJSON()\n        });\n\n        self.$el.find('.scroll-y').append($lease_card.$el);\n        self.child_views.push($lease_card);\n      });\n\n      return this;\n    },\n\n    showEmpty: function() {\n      var message = '<div class=\"no-bills\">';\n      message += '<div class=\"icon-container\"><div class=\"icon success\"></div></div>';\n      message += '<h2>You\\'re all set!</h2>';\n      message += '<p>You have no leases at this time.</p>';\n      message += '</div>';\n\n      this.$el.find('.scroll-y').html($(message));\n    }\n\n  });\n});"]}