define(["app","text!templates/webhooks/webhook.html"],function(e,t){return Backbone.View.extend({className:"webhook",events:{"click .action-delete":"promptDelete","click .action-unpause":"unpause","click .action-pause":"promptPause"},template:_.template(t),initialize:function(e){e&&_.extend(this,e);this.on("confirmDelete",this.delete,this),this.on("confirmPause",this.pause,this),this.render()},render:function(){var e=this.model.toJSON();return this.$el.html(this.template({webhook:e})),this},promptDelete:function(){var t=this.model.get("url"),o="Are you sure you want to delete "+t+"?";e.controls.modalConfirm(o,"confirmDelete",this)},delete:function(){var t=this,o={url:t.model.get("url")};o=JSON.stringify(o),this.model.destroy({data:o}).then(function(){t.$el.fadeOut(function(){delete t})},function(){console.log(arguments),e.alerts.error("Couldn't delete the webhook")})},promptPause:function(){var t=this.model.get("url"),o="Are you sure you want to pause "+t+"?";e.controls.modalConfirm(o,"confirmPause",this)},pause:function(){var t=this;this.setSubscriptionState(!0).then(function(){t.parentView.initialize()}).fail(function(){e.alerts.error("Could not pause webhook")})},unpause:function(){var t=this;this.setSubscriptionState(!1).then(function(){t.parentView.initialize()}).fail(function(){e.alerts.error("Could not unpause webhook")})},setSubscriptionState:function(t){return e.utils.request({path:"dwolla/subscriptions/"+this.model.id,method:"PUT",data:{paused:t}})}})});
//# sourceMappingURL=WebhookView.js.map
