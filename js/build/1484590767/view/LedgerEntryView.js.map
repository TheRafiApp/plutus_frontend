{"version":3,"sources":["view/LedgerEntryView.js"],"names":["define","app","ModelView","UserCardView","TransferModel","TransferTemplate","Backbone","View","extend","className","events","click .action-reinvite","click .action-cancel-transfer","template","_","initialize","options","this","self","router","getRoute","model","_id","fetch","then","render","context","edit","delete","$el","html","source","get","find","data","destination","$","removeClass","cancelTransfer","navigate","trigger"],"mappings":"AAIAA,QACE,MACA,iBACA,kBACA,gCACA,0CAEF,SAASC,EAAKC,EAAWC,EAAcC,EAAeC,GAEpD,MAAOC,UAASC,KAAKC,QAEnBC,UAAW,YAEXC,QACEC,yBAA0B,mBAC1BC,gCAAiC,kBAGnCC,SAAUC,EAAED,SAASR,GAErBU,WAAY,SAASC,GACnBF,EAAEN,OAAOS,KAAMD,EACf,IAAIE,GAAOD,IACAhB,GAAIkB,OAAOC,UAEtBH,MAAKI,MAAQ,GAAIjB,IAAgBkB,IAAKL,KAAKK,MAC3CL,KAAKI,MAAME,QAAQC,KAAK,WACtBN,EAAKO,YAITA,OAAQ,WAENR,KAAKf,UAAY,GAAIA,IACnBwB,QAAST,KAETD,SACEW,MAAM,EACNC,QAAQ,KAIZX,KAAKY,IAAIC,KAAKb,KAAKf,UAAU2B,IAE7B,IAAIE,GAASd,KAAKI,MAAMW,IAAI,SAExBD,IACFd,KAAKY,IAAII,KAAK,WAAWH,KAAK,GAAI3B,IAChC+B,KAAMH,IACLF,IAGL,IAAIM,GAAclB,KAAKI,MAAMW,IAAI,cAQjC,OANAf,MAAKY,IAAII,KAAK,gBAAgBH,KAAK,GAAI3B,IACrC+B,KAAMC,IACLN,KAEHO,EAAE,aAAaC,YAAY,WAEpBpB,MAGTqB,eAAgB,WAGdrB,KAAKI,MAAMiB,iBAAiBd,KAAK,WAC/BvB,EAAIkB,OAAOoB,SAAS,UAAYC,SAAS","file":"LedgerEntryView.js","sourcesContent":["/**\n * LedgerEntryView.js\n */\n\ndefine([\n  'app',\n  'view/ModelView',\n  'view/cards/user',\n  'model/transfers/TransferModel',\n  'text!templates/transfers/transfer.html'\n],\nfunction(app, ModelView, UserCardView, TransferModel, TransferTemplate) {\n\n  return Backbone.View.extend({\n\n    className: 'user-view',\n\n    events: {\n      'click .action-reinvite': 'resendInvitation',\n      'click .action-cancel-transfer': 'cancelTransfer'\n    },\n\n    template: _.template(TransferTemplate),\n\n    initialize: function(options) {\n      _.extend(this, options);\n      var self = this;\n      var role = app.router.getRoute();\n\n      this.model = new TransferModel({ _id: this._id });\n      this.model.fetch().then(function() {\n        self.render();\n      });\n    },\n\n    render: function() {\n\n      this.ModelView = new ModelView({\n        context: this,\n\n        options: {\n          edit: true,\n          delete: true\n        }\n      });\n\n      this.$el.html(this.ModelView.$el);\n\n      var source = this.model.get('source');\n\n      if (source) {\n        this.$el.find('.source').html(new UserCardView({\n          data: source\n        }).$el);\n      }\n\n      var destination = this.model.get('destination');\n\n      this.$el.find('.destination').html(new UserCardView({\n        data: destination\n      }).$el);\n\n      $('.tertiary').removeClass('loading');\n\n      return this;\n    },\n\n    cancelTransfer: function() {\n      var self = this;\n\n      this.model.cancelTransfer().then(function() {\n        app.router.navigate('ledger', { trigger: true });\n      });\n    }\n    \n  });\n});"]}